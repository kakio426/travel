<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 Í∞ïÎ¶â Í∞ÄÏ°± ÌûêÎßÅ Ïó¨Ìñâ</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & Babel -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f8fafc; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .glass-card { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(8px); border: 1px solid rgba(255, 255, 255, 0.3); }
        .timeline-line { position: absolute; left: 60px; top: 0; bottom: 0; width: 2px; background: #e2e8f0; }
        .mission-pulse { animation: pulse 2s infinite; }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const INITIAL_TRIP_DATA = {
            tripInfo: {
                title: "2026 Í∞ïÎ¶â Í∞ÄÏ°± ÌûêÎßÅ Ïó¨Ìñâ",
                dates: "2026.01.07 - 01.08",
                stay: "Ïã†Îùº Î™®ÎÖ∏Í∑∏Îû® Í∞ïÎ¶â",
                family: "ÏïÑÎπ†(Ïª§Ìîº), ÏóÑÎßà(ÌÜ†ÏÜçÏùåÏãù), 6ÏÑ∏ Îî∏(ÎèôÎ¨º/Ïï°Ìã∞ÎπÑÌã∞)"
            },
            itinerary: [
                {
                    day: 1, date: "1Ïõî 7Ïùº (Ìôî)",
                    schedule: [
                        { id: "d1-lunch", time: "12:00", category: "meal", isFixed: true, selectedOptionIndex: 0, options: [{ title: "Ï¥àÎãπ ÏàúÎëêÎ∂Ä ÎßàÏùÑ", desc: "ÏóÑÎßàÎäî ÏñºÌÅ∞ Ï†ÑÍ≥®, Îî∏ÏùÄ ÌïòÏñÄ ÏàúÎëêÎ∂Ä", tags: ["ÌÜ†ÏÜçÏ†Å", "ÏïÑÏù¥Ï∂îÏ≤ú"], place: "Ï¥àÎãπÎèô" }] },
                        { id: "d1-snack", time: "13:30", category: "shopping", isFixed: true, mission: true, selectedOptionIndex: 0, options: [{ title: "Í∞ïÎ¶âÏÉåÎìú Ï¥àÎãπÏßÅÏòÅÏ†ê", desc: "‚ö†Ô∏è ÌíàÏ†à Î∞©ÏßÄ! ÎØ∏Î¶¨ Íµ¨Îß§ Í∂åÏû•", tags: ["ÎØ∏ÏÖòÌïÑÏàò", "ÏÑ†Î¨º"], place: "Ï¥àÎãπÎèô" }] },
                        { id: "d1-coffee", time: "14:00", category: "coffee", isFixed: false, selectedOptionIndex: 0, options: [
                            { title: "Î≥¥Ìó§ÎØ∏Ïïà Î∞ïÏù¥Ï∂î Ïª§Ìîº", desc: "ÎåÄÌïúÎØºÍµ≠ 1ÏÑ∏ÎåÄ Î™ÖÏû•Ïùò Ìï∏ÎìúÎìúÎ¶Ω", tags: ["ÏïÑÎπ†Ï∂îÏ≤ú", "Ïû•Ïù∏Ï†ÑÌÜµ"] },
                            { title: "Î∞îÏö∞Ïπ¥Ìéò (Î≥∏Ï†ê)", desc: "ÌàáÎßàÎ£® Ïñ¥Î®∏Îãà Ïö¥ÏòÅ, ÌùëÏûÑÏûêÎùºÎñº", tags: ["ÏãúÍ∑∏ÎãàÏ≤ò", "Ïù∏Í∏∞"] },
                            { title: "Ïπ¥Ìéò Í∏∞ÏôÄ", desc: "Í≥†Ï¶àÎÑâÌïú ÌïúÏò• Í∞êÏÑ±", tags: ["ÏóÑÎßàÏ∂îÏ≤ú", "ÌïúÏò•"] }
                        ]},
                        { id: "d1-checkin", time: "16:00", category: "stay", isFixed: true, selectedOptionIndex: 0, options: [{ title: "Ïã†Îùº Î™®ÎÖ∏Í∑∏Îû® Ï≤¥ÌÅ¨Ïù∏", desc: "Ïò®ÏàòÌíÄ ÏàòÏòÅ (3Î∂Ä Ïù¥Ïö© Ï∂îÏ≤ú)", tags: ["Ìò∏ÌÖî", "ÏàòÏòÅ"], place: "ÏÜ°Ï†ïÎèô" }] },
                        { id: "d1-market", time: "18:30", category: "activity", isFixed: true, mission: true, selectedOptionIndex: 0, options: [{ title: "Í∞ïÎ¶â Ï§ëÏïôÏãúÏû•", desc: "Î≤†ÎãàÎã≠Í∞ïÏ†ï, Ïñ¥Î¨µÍ≥†Î°úÏºÄ ÌïÑÏàò", tags: ["ÏãúÏû•Íµ¨Í≤Ω", "ÎØ∏ÏÖòÌïÑÏàò"], place: "ÏÑ±ÎÇ®Îèô" }] },
                    ]
                },
                {
                    day: 2, date: "1Ïõî 8Ïùº (Ïàò)",
                    schedule: [
                        { id: "d2-activity", time: "10:00", category: "activity", isFixed: false, selectedOptionIndex: 0, options: [{ title: "ÏûêÏó∞ÏïÑÎÜÄÏûê", desc: "Ïã§ÎÇ¥ ÏÉùÌÉúÏ≤¥Ìóò, ÎèôÎ¨º Î®πÏù¥Ï£ºÍ∏∞", tags: ["ÏïÑÏù¥ÏµúÏï†", "Ïã§ÎÇ¥"] }, { title: "Í≤ΩÌè¨ ÏïÑÏø†ÏïÑÎ¶¨ÏõÄ", desc: "Îî∞ÎúªÌïú Ïã§ÎÇ¥ Í¥ÄÎûå", tags: ["Ïã§ÎÇ¥", "ÍµêÏú°"] }] },
                        { id: "d2-lunch", time: "12:30", category: "meal", isFixed: false, selectedOptionIndex: 0, options: [{ title: "Ìè¨ÎÇ®ÏÇ¨Í≥®ÏòπÏã¨Ïù¥", desc: "Ïïà Îß§Ïö¥ Ï´ÄÎìù ÏòπÏã¨Ïù¥", tags: ["ÌÜ†ÏÜçÏ†Å", "Îã¥Î∞±"] }, { title: "Í∞ïÎ¶â Î∂àÍ≥†Í∏∞", desc: "Îã¨ÏΩ§ ÌååÎ∂àÍ≥†Í∏∞", tags: ["ÏïÑÏù¥Î∞•ÎèÑÎëë", "Î°úÏª¨"] }] },
                        { id: "d2-coffee", time: "14:30", category: "coffee", isFixed: false, selectedOptionIndex: 0, options: [{ title: "ÌÖåÎùºÎ°úÏÇ¨ Î≥∏Ï†ê", desc: "ÏõÖÏû•Ìïú Ïª§Ìîº Í≥µÏû•", tags: ["ÏïÑÎπ†ÌïÑÏàò", "ÏõÖÏû•"] }, { title: "ÌÖåÎùºÎ°úÏÇ¨ Í≤ΩÌè¨Ìò∏Ïàò", desc: "Ìò∏Ïàò Î∑∞ Î∂ÅÏπ¥Ìéò", tags: ["ÏïÑÏù¥ÎèôÎ∞ò", "Ïó¨Ïú†"] }] },
                    ]
                }
            ]
        };

        function App() {
            const [trip, setTrip] = useState(INITIAL_TRIP_DATA);
            const [currentDay, setCurrentDay] = useState(0);
            const [apiKey, setApiKey] = useState(localStorage.getItem('gemini_api_key') || "");
            const [showSettings, setShowSettings] = useState(false);
            const [showSummary, setShowSummary] = useState(false);
            const [isChatOpen, setIsChatOpen] = useState(false);
            const [chatMessages, setChatMessages] = useState([{ role: 'ai', text: 'ÏïàÎÖïÌïòÏÑ∏Ïöî! Î¨¥ÏóáÏùÑ ÎèÑÏôÄÎìúÎ¶¥ÍπåÏöî? ü§ñ' }]);
            const [userInput, setUserInput] = useState("");
            const [isTyping, setIsTyping] = useState(false);
            const [aiTip, setAiTip] = useState({ show: false, content: "" });

            useEffect(() => { lucide.createIcons(); }, [currentDay, trip]);

            const saveApiKey = (key) => {
                setApiKey(key);
                localStorage.setItem('gemini_api_key', key);
                setShowSettings(false);
            };

            const openNaver = (title) => {
                window.open(`https://search.naver.com/search.naver?query=${encodeURIComponent(title)}`, '_blank');
            };

            const callGemini = async (prompt, system) => {
                if (!apiKey) throw new Error("KEY_MISSING");
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }],
                        systemInstruction: { parts: [{ text: system }] }
                    })
                });
                const data = await res.json();
                return data.candidates[0].content.parts[0].text;
            };

            const handleSend = async () => {
                if (!userInput.trim()) return;
                const txt = userInput;
                setUserInput("");
                setChatMessages(prev => [...prev, { role: 'user', text: txt }]);
                setIsTyping(true);
                try {
                    const ans = await callGemini(txt, "Í∞ïÎ¶â Ïó¨Ìñâ Í∞ÄÏù¥Îìú");
                    setChatMessages(prev => [...prev, { role: 'ai', text: ans }]);
                } catch (e) {
                    setChatMessages(prev => [...prev, { role: 'ai', text: "API ÌÇ§Î•º ÏÑ§Ï†ïÌï¥Ï£ºÏÑ∏Ïöî." }]);
                } finally { setIsTyping(false); }
            };

            return (
                <div className="max-w-md mx-auto min-h-screen bg-slate-50 relative shadow-2xl overflow-x-hidden">
                    {/* Header */}
                    <header className="bg-blue-600 text-white p-6 rounded-b-[2.5rem] shadow-lg">
                        <div className="flex justify-between items-center mb-4">
                            <h1 className="text-xl font-bold">{trip.tripInfo.title}</h1>
                            <button onClick={() => setShowSettings(true)} className="p-2 bg-white/20 rounded-full"><i data-lucide="settings" size="20"></i></button>
                        </div>
                        <div className="flex gap-2 overflow-x-auto no-scrollbar">
                            <span className="text-[10px] bg-blue-500/50 px-3 py-1 rounded-full border border-blue-400">üë® ÏïÑÎπ†: Ïª§Ìîº</span>
                            <span className="text-[10px] bg-pink-500/50 px-3 py-1 rounded-full border border-pink-400">üë© ÏóÑÎßà: ÌÜ†ÏÜç</span>
                            <span className="text-[10px] bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full font-bold">üëß Îî∏: ÎèôÎ¨º</span>
                        </div>
                    </header>

                    {/* Tabs */}
                    <div className="flex p-4 gap-3 sticky top-0 bg-slate-50/90 backdrop-blur-md z-30">
                        {[0, 1].map(idx => (
                            <button key={idx} onClick={() => setCurrentDay(idx)} className={`flex-1 py-3 rounded-2xl font-bold text-sm shadow-sm transition-all ${currentDay === idx ? 'bg-blue-600 text-white scale-105' : 'bg-white text-gray-400'}`}>
                                Day {idx + 1} ({trip.itinerary[idx].date.split('(')[1].replace(')', '')})
                            </button>
                        ))}
                    </div>

                    {/* Timeline */}
                    <div className="px-6 pb-24 relative">
                        <div className="timeline-line"></div>
                        {trip.itinerary[currentDay].schedule.map((item) => {
                            const selected = item.options[item.selectedOptionIndex];
                            return (
                                <div key={item.id} className="relative pl-20 pb-8">
                                    <div className="absolute left-[53px] top-1 w-4 h-4 rounded-full border-4 border-blue-500 bg-white z-10"></div>
                                    <span className="absolute left-0 top-0 text-xs font-bold text-gray-400 w-12 text-right pt-0.5">{item.time}</span>
                                    
                                    <div onClick={() => openNaver(selected.title)} className={`glass-card rounded-3xl p-5 shadow-sm active:scale-95 transition-transform ${item.mission ? 'mission-pulse border-red-200' : ''}`}>
                                        <div className="flex justify-between items-start mb-2">
                                            <h3 className="font-bold text-gray-800 flex items-center gap-1">
                                                {selected.title} <i data-lucide="search" className="w-3 h-3 text-gray-300"></i>
                                            </h3>
                                        </div>
                                        <p className="text-sm text-gray-600 mb-3">{selected.desc}</p>
                                        <div className="flex flex-wrap gap-1 mb-4">
                                            {selected.tags.map(tag => <span key={tag} className="text-[10px] px-2 py-0.5 bg-slate-100 text-slate-500 rounded-md">#{tag}</span>)}
                                        </div>
                                        <button onClick={(e) => { e.stopPropagation(); /* AI Tip Logic */ }} className="w-full py-2 bg-blue-50 text-blue-600 text-xs font-bold rounded-xl flex items-center justify-center gap-2">
                                            <i data-lucide="sparkles" className="w-3 h-3"></i> AI ÍøÄÌåÅ Î≥¥Í∏∞
                                        </button>
                                    </div>
                                </div>
                            );
                        })}
                    </div>

                    {/* Floating Buttons */}
                    <div className="fixed bottom-6 right-6 flex flex-col gap-3 z-40">
                        <button onClick={() => setShowSummary(true)} className="w-14 h-14 bg-gray-800 text-white rounded-full shadow-xl flex items-center justify-center"><i data-lucide="list-checks"></i></button>
                        <button onClick={() => setIsChatOpen(true)} className="w-14 h-14 bg-blue-600 text-white rounded-full shadow-xl flex items-center justify-center relative"><i data-lucide="sparkles"></i></button>
                    </div>

                    {/* Settings Modal */}
                    {showSettings && (
                        <div className="fixed inset-0 z-[100] bg-black/60 backdrop-blur-sm flex items-center justify-center p-6">
                            <div className="bg-white rounded-[2rem] p-8 w-full max-w-sm">
                                <h2 className="text-xl font-bold mb-4">üîë API ÌÇ§ ÏÑ§Ï†ï</h2>
                                <input type="password" value={apiKey} onChange={e => setApiKey(e.target.value)} placeholder="Gemini API ÌÇ§Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî" className="w-full px-4 py-3 bg-slate-100 rounded-xl mb-4 text-sm outline-none focus:ring-2 focus:ring-blue-500" />
                                <button onClick={() => saveApiKey(apiKey)} className="w-full py-4 bg-blue-600 text-white rounded-2xl font-bold">Ï†ÄÏû•ÌïòÍ∏∞</button>
                                <button onClick={() => setShowSettings(false)} className="w-full py-3 mt-2 text-gray-400 text-sm">Îã´Í∏∞</button>
                            </div>
                        </div>
                    )}

                    {/* Chat Modal (Simplified) */}
                    {isChatOpen && (
                        <div className="fixed inset-0 z-[110] bg-white flex flex-col">
                            <div className="bg-blue-600 p-6 flex justify-between text-white">
                                <span className="font-bold">AI Ïó¨Ìñâ ÎπÑÏÑú</span>
                                <button onClick={() => setIsChatOpen(false)}><i data-lucide="x"></i></button>
                            </div>
                            <div className="flex-1 p-6 space-y-4 overflow-y-auto bg-slate-50">
                                {chatMessages.map((m, i) => (
                                    <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                                        <div className={`p-4 rounded-2xl text-sm ${m.role === 'user' ? 'bg-blue-600 text-white' : 'bg-white shadow-sm text-gray-700'}`}>{m.text}</div>
                                    </div>
                                ))}
                            </div>
                            <div className="p-4 border-t flex gap-2">
                                <input type="text" value={userInput} onChange={e => setUserInput(e.target.value)} placeholder="ÏßàÎ¨∏ÌïòÏÑ∏Ïöî..." className="flex-1 px-4 py-3 bg-slate-100 rounded-xl outline-none" />
                                <button onClick={handleSend} className="p-3 bg-blue-600 text-white rounded-xl"><i data-lucide="send" className="w-5 h-5"></i></button>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
